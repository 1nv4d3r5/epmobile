#+TITLE: EP Mobile Development Notes
* Features
** DONE Dofetilide Calculator
** DONE QTc Calculator
** DONE CL/HR Converter
** TODO WPW Accessory Pathway localizer
*** Milstein et al.  PACE 10:555, 1987.
*** Arruda 1998
** DONE VT vs SVT Brugada algorithm
*** Proposed implementation
    | Follow steps in order: |                                                  |     |
    | Step 1                 | Absence of an RS Complex in all precordial leads | Y/N |
    |                        | Y = VT                                           |     |
    | Step 2                 | R to S interval > 100 ms in one precordial lead  | Y/N |
    |                        | Y = VT                                           |     |
    | Step 3                 | AV Dissociation                                  | Y/N |
    |                        | Y = VT                                           |     |
    | Step 4                 | Morphology criteria in V1-2 and V6               | Y/N |
    |                        | Y = VT                                           |     |
*** Morphology criteria
    - RBBB QRS
      - Lead V1
	- Monophasic R or QR or RS favors VT
	- Triphasic RSR' favors SVT
      - Lead V6
	- R to S ratio < 1 (R small than S) favors VT
	- RS or QR favors VT
	- Monophasic R favors VT
	- Triphasic favors SVT
	- R to S ration > 1 favors SVT
    - LBBB QRS
      - Lead V1 or V2
	- Any of the following R > 30 ms, >60 ms to nadir S, notched S favors VT
      - Lead V6
	- Presence of any Q wave, QR or QS favors VT
	- Absence of Q wave in V6 favors SVT
*** Reference
    http://askdrwiki.com/mediawiki/index.php?title=Brugada_Criteria#Four_Brugada_Criteria_for_Diagnosis_of_Ventricular_Tachycardia
** DONE CHADS score
** DONE CHADS-VASc score
** DONE HAS-BLED
   | Risk                           | Score |
   | HTN (sys >= 160)               |     1 |
   | Abnormal Kidney Cr>2.6 mg/dL   |     1 |
   | Abnormal Liver                 |     1 |
   | Previous Stroke                |     1 |
   | Hx Bleeding or Anemia          |     1 |
   | Labile INR (< 60% therapeutic) |     1 |
   | Elderly (65 or older)          |     1 |
   | Drugs - antiplatet             |     1 |
   | Drugs - EtOH (>= 8 drinks/wk)  |     1 |
   - Score of 3 or more indicates caution in using AC and increased 1 year
     risk of bleeding.
** DONE ARVD score
** DONE Pradaxa dose calculator
** DONE Warfarin dose calculator
** DONE Rivoraxaban dose calculator
** DONE SQTS diagnosis
** TODO Epicardial vs endocardial VT
** TODO Mitral annular VT
** TODO Brugada ECG types
** TODO LVH
** DONE Normal EP Values
** TODO EP Glossary
** TODO CMS ICD criteria
** TODO LQTS criteria
** TODO ACC WCT algorithm
** TODO Creatinine Clearance calculator
* Menu
** units
*** msec or sec
*** metric or US
** QTc formulae
*** DONE Bazett's (default)
*** DONE all others!
*** implementation*
*** DONE Java class QtcCalculator
*** Normal values
**** DONE Color code abnormal QTc
* Issues
** Themes
   We are using default Android theme.  android:background settings
   probably should not be used.  Should try to use Android predefined
   text settings and not specific colors.  Potentially could have an
   application theme which by default is the default Android theme,
   but with the ability to override it.
** Strings
   Still have a mixture of strings in strings.xml and in code.  All
   strings (except maybe some numbers) should be in strings.xml.
** Grouping
*** TODO add Warfarin dose calculator to Drug Dose Calculators group
*** ? other groups
    - Risk Scores
    - Diagnostic Scores
    - ECG patterns
* Main screen
** New screen
   Need alphabetized grouped by letter scrollview list
* Implementation
** Abstract base classes
*** DONE For creatinine clearance based calculators
*** DONE For scores
* Warfarin
  | Day  | Change1 | Change2 |
  | Sun  | 1 tab   | 1 tab   |
  | Mon  |         |         |
  | Tues |         |         |
  | Wed  |         |         |
  | Thur |         |         |
  | Fri  |         |         |
  | Sat  |         |         |
  |------+---------+---------|
** 
* Preparing new version -- IMPORTANT!
  - finish version
  - update doc/description.txt
  - run git log --pretty=oneline and update changes/x.y.z.txt
  - update screenshots - resize them with GIMP to 320 x 480!
  - IMPORTANT - update AndroidManifest.xml
    - increment android:versionCode
    - change android:versionName
  - git add changes/x.y.z.txt
  - git commit
  - git tag vX.Y.Z
  - git push --tags origin master
  - make/sign epmobile.apk, save it in dev/epmobileapp/vX.Y.Z/
  - on market.android.com update product details
  - upload apk, deactivate old one
  - DONE!
* Style
** General
*** lower_case_hyphenated
*** separate_numbers_1
** Titles vs Labels
   Activities have titles, everything else has labels
* Eclipse set up
** Android 4 SDK
** Window->Preferences->Android->Editors->Format on Save
** Window->Preferences->Android->Java->Editor->Perform selected actions on save
*** Format Source code -> Format all lines
** Project->Properties->Android->Project Build Target Android 4.0
** 
* References
** RV dysplasia
   http://arvc.ca/arvc/info/i.php?ix=1&pag=3
** WCT algorithms
   http://askdrwiki.com/mediawiki/index.php?title=Brugada_Criteria#Four_Brugada_Criteria_for_Diagnosis_of_Ventricular_Tachycardia
   http://en.ecgpedia.org/wiki/Approach_to_the_Wide_Complex_Tachycardia
** RWPT
   http://www.heartrhythmjournal.com/article/S1547-5271%2810%2900216-X/abstract
* WCT
** Wellens morphology criteria
*** ECGpedia
    - LBBB VT
      - Initial R > 40 ms in V1 or V2 => VT
      - RS > 100 ms in V1 or V2 => VT (redundent, already in Step 1?, Brugada)
      - Slurred or notched S in V1 or V2 => VT
      - Q to nadir QS > 60 ms in V1 or V2 => VT
      - Q or QS in V6 => VT
    - RBBB VT
      - Monophasic R or qR in V1 => VT
      - R taller than R' (rabbit ears) in V1 => VT
      - rS in V6 => VT (i.e. RS ratio < 1)
*** Brugada et al.
**** Notes
     - Text only refers to V1 and V6, figure (Fig 1) refers to V1-2 and
       V6
     - Table 1 on morphology criteria uses V1 for RBBB but V1 or V2 for LBBB
     - In text, step 4 = "if the tachycardia fulfilled the morphology criteria
       for VT in leads V1 and V6, the diagnosis of VT was made."
**** Criteria from Table 1
     - LBBB VT
       - Lead V1 or V2
	 - R > 30 msec or > 60 msec to nadir S or notched S 
       - Lead V6
	 - QR or QS
	 - Monophasic R indeterminate
	 - Triphasic SVT
     - RBBB VT
       - Lead V1
	 - Monophasic R
	 - QR or RS
	 - Triphasic => SVT
       - Lead V6
	 - R to S ratio < 1
	 - QS or QR
	 - Monophasic R
	 - Triphasic => SVT
	 - R to S > 1 => ?VT or SVT
*** Final criteria
    - LBBB VT
      - Lead V1 or V2
	- R > 30 msec
	- RS > 60 msec
	- Notched S
      - Lead V6
	- QR
	- QS
    - RBBB VT
      - Lead V1
	- Monophasic R
	- QR
	- RS
      - Lead V6
	- R to S < 1
	- QR
	- QS
	- Monophasic R
*** Analysis
**** Wellens
***** At least 1 point in V1 and V6 => VT
***** Zero points => SVT
***** V1 and V6 discordant => indeterminate
***** Include rabbit ears? - not listed in Brugada
**** Brugada
***** At least 1 point in V1 and V6 => VT
***** Otherwise SVT
*** Implementation
    - Use figures and text for morphology criteria
    - Use checklist for Brugada morphology criteria
* Short QT Syndrome
** fine print of algorithm
   - Jpoint-Tpeak interval measured in precordial lead with greatest
     amplitude T wave.
   - Clinical History: events must occur in the absence of an
     identifiable etiology, including structural heart disease.
   - Points can only be received for 1 of cardiac arrest, documented
     polymorphic VT, or unexplained syncope.
   - Family history points can only be received once int his section.
   - A minimum of 1 point must be obtained in the ECG section in order
     to obtain additional points.  
* Rivaroxaban
  | CrCl           | Dose                          |
  | > 50 ml/min    | 20 mg daily with evening meal |
  | 15 - 50 ml/min | 15 mg daily with evening meal |
  | < 15 mL/min    | avoid                         |
* ICD Criteria
  1. Documented cardiac arrest due to VF, not due to transient or
     reversible cause.
  2. Documented sustained ventricular tachyarrhythmia, either
     spontaneous or induced by EP study, not associated with an acute
     MI, and not due to a transient or reversible cause.
  3. Documented familial or inherited conditions with a high risk of
     life-threatening VT, such as long QT syndrome or hypertrophic
     cardiomyopathy.
  4. Documented prior MI, EF <= 35%, and inducible sus VT or VF at
     EPS.  (MI more than 40 days pre-ICD, and EPS performed > 4 weeks
     post MI.)
  5. Documented prior MI and EF <= 30%
  6. ICM, documented prior MI, Class II or III HF, EF <= 35%.
  7. NICM, > 9 months, Class II or III HF, EF <= 35%.
  8. Pts who meed CMS coverage criteria for CRT device and have Class
     IV HF.
  9. NICM > 3 months, Class II or III, and EF <= 35%.
** Exclusions
*** Cardiogenic shock or symptomatic hypotension
*** CABG or PCI within past 3 months
*** Acute MI within 40 days
*** Symptoms or findings that would make patient a candidate for revascularization
*** Irreversible brain damage from preexisting cerebral disease
*** Non-cardiac disease with likelihood of survival < 1 year
** Patients must be enrolled in ICD registry
** Note exclusions and registry apply to the primary prevention indications
** Parameters
   - Cardiac arrest y/n
   - sustained VT/VF spontaneous
   - sustained VT/VF induced
   - familial high risk condition
   - EF <= 35%
   - EF <= 30%
   - Documented MI
   - ICM
   - NICM
   - NYHA Class
   - Duration of CM
   - CRT indication
** Simplified Parameters
   - [ ] Cardiac arrest due to VF not due to reversible cause
   - [ ] Spontaneous or inducible VT/VF
   - [ ] Familial high risk condition (e.g. LQTS, HCM)
   - [ ] Documented MI
   - [ ] Ischemic CM
   - [ ] Nonischemic CM
   - [ ] Duration of CM
   - [ ] EF (radio group)
   - [ ] NYHA class (radio group)
   - [ ] CRT Indication?
*** Exclusions
    - [ ] Cardiogenic shock or symptomatic hypotension
    - CABG or PCI withing past 3 months
    - Acute MI within 40 days
    - Symptoms or findings that would make patient a candidate for revascularization
    - Irreversible brain damage from preexisting cerebral disease
    - Non-cardiac disease with likelihood of survival < 1 year
** Logic
   - Apply exclusions only where they should be (Primary prevention)
   - 3 month limit only for NICM
   - If indicated by too soon, say so
   - CRT indication only enters into Class IV CHF
     - Class IV excludes other indications
** Additional info
   - ACC/AHA/HRS indication
   - cite which CMS indication it falls under
   - button to list CMS indications
   - button to list AHA indications
   - change module to ICD indications?
   - maybe separate modules for CMS, AHA?
   - show study that supports each indication
     - AVID
     - MADIT II
     - etc.
* Unicode symbols
  |-------------------------+----------|
  | Description             | Hex Code |
  |-------------------------+----------|
  | right pointing triangle | \u25b6   |
  | <                       | \u003c   |
  | >                       | \u003e   |
  | ≤                       | \u2264   |
  | ≥                       | \u2265   |
  |-------------------------+----------|

  
