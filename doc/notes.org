#+TITLE: EP Mobile Development Notes
* Features
** DONE Dofetilide Calculator
** DONE QTc Calculator
** DONE CL/HR Converter
** TODO WPW Accessory Pathway localizer
*** Milstein et al.  PACE 10:555, 1987.
*** Arruda 1998
** TODO VT vs SVT Brugada algorithm
*** Proposed implementation
    | Follow steps in order: |                                                  |     |
    | Step 1                 | Absence of an RS Complex in all precordial leads | Y/N |
    |                        | Y = VT                                           |     |
    | Step 2                 | R to S interval > 100 ms in one precordial lead  | Y/N |
    |                        | Y = VT                                           |     |
    | Step 3                 | AV Dissociation                                  | Y/N |
    |                        | Y = VT                                           |     |
    | Step 4                 | Morphology criteria in V1-2 and V6               | Y/N |
    |                        | Y = VT                                           |     |
*** Morphology criteria
    - RBBB QRS
      - Lead V1
	- Monophasic R or QR or RS favors VT
	- Triphasic RSR' favors SVT
      - Lead V6
	- R to S ratio < 1 (R small than S) favors VT
	- RS or QR favors VT
	- Monophasic R favors VT
	- Triphasic favors SVT
	- R to S ration > 1 favors SVT
    - LBBB QRS
      - Lead V1 or V2
	- Any of the following R > 30 ms, >60 ms to nadir S, notched S favors VT
      - Lead V6
	- Presence of any Q wave, QR or QS favors VT
	- Absence of Q wave in V6 favors SVT
*** Reference
    http://askdrwiki.com/mediawiki/index.php?title=Brugada_Criteria#Four_Brugada_Criteria_for_Diagnosis_of_Ventricular_Tachycardia
** DONE CHADS score
** DONE CHADS-VASc score
** DONE HAS-BLED
   | Risk                           | Score |
   | HTN (sys >= 160)               |     1 |
   | Abnormal Kidney Cr>2.6 mg/dL   |     1 |
   | Abnormal Liver                 |     1 |
   | Previous Stroke                |     1 |
   | Hx Bleeding or Anemia          |     1 |
   | Labile INR (< 60% therapeutic) |     1 |
   | Elderly (65 or older)          |     1 |
   | Drugs - antiplatet             |     1 |
   | Drugs - EtOH (>= 8 drinks/wk)  |     1 |
   - Score of 3 or more indicates caution in using AC and increased 1 year
     risk of bleeding.
** TODO Epicardial vs endocardial VT
** TODO Mitral annular VT
** TODO Brugada ECG types
** DONE ARVD score
** DONE Pradaxa dose calculator
** DONE Warfarin dose calculator
** DONE Rivoraxaban dose calculator
** DONE SQTS diagnosis
** TODO Epicardial vs endocardial VT
** TODO Mitral annular VT
** TODO Brugada ECG types
** TODO LVH
** DONE Normal EP Values
** TODO EP Glossary
** TODO CMS ICD criteria
** TODO LQTS criteria
** TODO ACC WCT algorithm
** TODO Creatinine Clearance calculator
* Menu
** units
*** msec or sec
*** metric or US
** QTc formulae
*** DONE Bazett's (default)
*** DONE all others!
*** implementation*
*** DONE Java class QtcCalculator
*** Normal values
**** DONE Color code abnormal QTc
* Issues
** Themes
   We are using default Android theme.  android:background settings
   probably should not be used.  Should try to use Android predefined
   text settings and not specific colors.  Potentially could have an
   application theme which by default is the default Android theme,
   but with the ability to override it.
** Strings
   Still have a mixture of strings in strings.xml and in code.  All
   strings (except maybe some numbers) should be in strings.xml.
** Grouping
*** TODO add Warfarin dose calculator to Drug Dose Calculators group
*** ? other groups
    - Risk Scores
    - Diagnostic Scores
    - ECG patterns
* Main screen
** New screen
   Need alphabetized grouped by letter scrollview list
* Implementation
** Abstract base classes
*** DONE For creatinine clearance based calculators
*** For scores
* Warfarin
  | Day  | Change1 | Change2 |
  | Sun  | 1 tab   | 1 tab   |
  | Mon  |         |         |
  | Tues |         |         |
  | Wed  |         |         |
  | Thur |         |         |
  | Fri  |         |         |
  | Sat  |         |         |
  |------+---------+---------|
** 
* Preparing new version -- IMPORTANT!
  - finish version
  - update doc/description.txt
  - run git log --pretty=oneline and update changes/x.y.z.txt
  - update screenshots - resize them with GIMP to 320 x 480!
  - IMPORTANT - update AndroidManifest.xml
    - increment android:versionCode
    - change android:versionName
  - git commit
  - git tag vX.Y.Z
  - git push tags origin master
  - make/sign epmobile.apk, save it in dev/epmobileapp/vX.Y.Z/
  - on market.android.com update product details
  - upload apk, deactivate old one
  - DONE!
* Style
** General
*** lower_case_hyphenated
*** separate_numbers_1
** Titles vs Labels
   Activities have titles, everything else has labels
   


* References
** RV dysplasia
   http://arvc.ca/arvc/info/i.php?ix=1&pag=3
** WCT algorithms
   http://askdrwiki.com/mediawiki/index.php?title=Brugada_Criteria#Four_Brugada_Criteria_for_Diagnosis_of_Ventricular_Tachycardia
   http://en.ecgpedia.org/wiki/Approach_to_the_Wide_Complex_Tachycardia
** RWPT
   http://www.heartrhythmjournal.com/article/S1547-5271%2810%2900216-X/abstract
* WCT
** Wellens morphology criteria
*** ECGpedia
    - LBBB VT
      - Initial R > 40 ms in V1 or V2 => VT
      - RS > 100 ms in V1 or V2 => VT (redundent, already in Step 1?, Brugada)
      - Slurred or notched S in V1 or V2 => VT
      - Q to nadir QS > 60 ms in V1 or V2 => VT
      - Q or QS in V6 => VT
    - RBBB VT
      - Monophasic R or qR in V1 => VT
      - R taller than R' (rabbit ears) in V1 => VT
      - rS in V6 => VT (i.e. RS ratio < 1)
*** Brugada et al.
**** Notes
     - Text only refers to V1 and V6, figure (Fig 1) refers to V1-2 and
       V6
     - Table 1 on morphology criteria uses V1 for RBBB but V1 or V2 for LBBB
     - In text, step 4 = "if the tachycardia fulfilled the morphology criteria
       for VT in leads V1 and V6, the diagnosis of VT was made."
**** Criteria from Table 1
     - LBBB VT
       - Lead V1 or V2
	 - R > 30 msec or > 60 msec to nadir S or notched S 
       - Lead V6
	 - QR or QS
	 - Monophasic R indeterminate
	 - Triphasic SVT
     - RBBB VT
       - Lead V1
	 - Monophasic R
	 - QR or RS
	 - Triphasic => SVT
       - Lead V6
	 - R to S ratio < 1
	 - QS or QR
	 - Monophasic R
	 - Triphasic => SVT
	 - R to S > 1 => ?VT or SVT
*** Final criteria
    - LBBB VT
      - Lead V1 or V2
	- R > 30 msec
	- RS > 60 msec
	- Notched S
      - Lead V6
	- QR
	- QS
    - RBBB VT
      - Lead V1
	- Monophasic R
	- QR
	- RS
      - Lead V6
	- R to S < 1
	- QR
	- QS
	- Monophasic R
*** Analysis
**** Wellens
***** At least 1 point in V1 and V6 => VT
***** Zero points => SVT
***** V1 and V6 discordant => indeterminate
***** Include rabbit ears? - not listed in Brugada
**** Brugada
***** At least 1 point in V1 and V6 => VT
***** Otherwise SVT
*** Implementation
    - Use figures and text for morphology criteria
    - Use checklist for Brugada morphology criteria

